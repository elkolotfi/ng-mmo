<div class="sign-in">
  <h1>{{action}}</h1>

  <a ng-click="toggleLogin()" class="alt-link">{{toggle}}</a>

  <form class="loginForm" ng-show="!registering" name="loginForm" ng-submit="login(loginForm)" novalidate>
    <!--<input type="text" ng-model="user.username" placeholder="username" autofocus required>-->
    <!--<input type="password" ng-model="user.password" placeholder="password" required>-->


    <div ng-class="{'has-error': form.email.$error.mongoose}">
      <input type="text"
             class="form-control"
             placeholder="email"
             name="email"
             ng-model="user.email"
             required
             autofocus
             mongoose-error>

      <p class="help-block"
         ng-show="form.email.$error.mongoose">
        {{ errors.email }}
      </p>
    </div>

    <div ng-class="{'has-error': form.password.$error.mongoose}">
      <input type="password"
             class="form-control"
             placeholder="password"
             name="password"
             ng-model="user.password"
             required
             mongoose-error>

      <p class="help-block"
         ng-show="form.password.$error.mongoose">
        {{ errors.password }}
      </p>
    </div>

    <div class="form-group has-error">
      <p class="help-block">{{ error.other }}</p>
    </div>

    <button class="btn btn-lg btn-primary btn-block" type="submit">SUBMIT</button>
  </form>
  <form class="loginForm" ng-show="registering" name="signupForm" ng-submit="register(signupForm)" novalidate>
    <div class="form-group"
         ng-class="{
                     'has-warning': form.email.$dirty,
                     'has-success': form.email.$valid && form.email.$dirty && !form.email.$error.mongoose,
                     'has-error': form.email.$invalid && form.email.$dirty || form.email.$error.mongoose
                     }">
      <input class="form-control"
             placeholder="email address"
             type="email"
             name="email"
             ng-model="user.email"
             required
             autofocus
             on-focus
             mongoose-error/>

      <p class="help-block"
         ng-show="form.email.$error.email && !form.email.$focused">
        Not a valid email.
      </p>

      <p class="help-block"
         ng-show="form.email.$error.mongoose">
        {{ errors.email }}
      </p>
    </div>

    <div class="form-group"
         ng-class="{
                     'has-warning': form.username.$dirty,
                     'has-success': form.username.$valid && form.username.$dirty && !form.username.$error.mongoose,
                     'has-error': form.username.$invalid && form.username.$dirty || form.username.$error.mongoose
                     }">
      <input class="form-control"
             placeholder="username"
             type="text"
             name="username"
             ng-model="user.username"
             required
             unique-username
             mongoose-error/>

      <p class="help-block"
         ng-show="form.username.$error.unique && form.username">
        That username is already taken.
      </p>

      <p class="help-block"
         ng-show="form.password.$error.mongoose">
        {{ errors.username }}
      </p>
    </div>

    <div class="form-group"
         ng-class="{'has-warning': form.password.$dirty,
                    'has-success': form.password.$valid && form.password.$dirty && !form.password.$error.mongoose,
                    'has-error': form.password.$invalid && form.password.$dirty || form.password.$error.mongoose
                    }">
      <input class="form-control"
             placeholder="password"
             type="password"
             name="password"
             ng-model="user.password"
             ng-minlength="5"
             required
             mongoose-error/>

      <p class="help-block"
         ng-show="(form.password.$error.minlength || form.password.$invalid)
                                && form.password.$dirty
                                && !form.password.$error.required">
        Password must be at least 5 characters.
      </p>

      <p class="help-block"
         ng-show="form.password.$error.mongoose">
        {{ errors.password }}
      </p>
    </div>
    <br/>
    <button class="btn btn-lg btn-primary btn-block"
            type="submit"
            ng-disabled="form.$invalid">SUBMIT
    </button>
  </form>

</div>